<?xml version="1.0" encoding="UTF-8"?>
<html>
    <head>
        <title>Atomic Wiki</title>
        <link rel="shortcut icon" href="theme/resources/images/favicon.ico"/>
        <link rel="stylesheet" type="text/css" href="libs/scripts/jquery/css/smoothness/jquery.ui.all.css"/>
        <link rel="stylesheet" type="text/css" href="theme/resources/css/exist.css"/>
        <link rel="stylesheet" href="resources/scripts/aloha/css/aloha.css" id="aloha-style-include" type="text/css"/>
    </head>
    <body class="templates:surround?with=templates/page.html&amp;at=main&amp;using=body">
        <div id="right">
            <div class="templates:include?path=templates/menu.html"/>
            <div class="box">
                <div class="app:entry?feed=help&amp;entry=MarkupHelp">
                    <h3 class="app:title entrytitle"/>
                    <div class="app:content content"/>
                </div>
            </div>
        </div>
        <div id="content">
            <div class="app:feed">
                <div class="app:get-or-create-entry entries">
                    <div id="edit" class="edit">
                        <form id="edit-form" action="?" method="POST">
                            <div class="editrow edit-commands">
                                <button id="edit-form-cancel" type="cancel">Cancel</button>
                                <button id="edit-form-save">Save</button>
                                <button id="edit-form-saveAndClose" type="submit">Save and Close</button>
                            </div>
                            <div class="editrow">
                                Using HTML editor. <button name="action" value="switch-editor" id="editor-switch">Switch to Wiki editor</button>
                            </div>
                            <div class="editrow title">
                                <input class="app:edit-title" type="text" name="title" placeholder="Title" required="required"/>
                                <label for="title">Title</label>
                            </div>
                            <div class="editrow">
                                <input class="app:edit-name" type="text" name="name" placeholder="ShortName" required="required" pattern="^[\w-.:]+$"/>
                                <label for="name">Short Name</label>
                            </div>
                            <div class="editrow" id="permissions-accordion">
                                <h3>
                                    <a href="#">Permissions</a>
                                </h3>
                                <div class="templates:include?path=templates/permissions.html"/>
                            </div>
                            <div class="editrow options">
                                <input type="checkbox" class="app:edit-external" name="external"/>
                                Check to store content and metadata in separate documents
                            </div>
                            <div class="editrow accordion">
                                <h3>
                                    <a href="#">Summary</a>
                                </h3>
                                <div id="summary-editor-html" class="content app:edit-summary?mode=html"/>
                            </div>
                            <div class="editrow">
                                <h3>Content</h3>
                                <div id="content-editor-html" class="content app:edit-content?mode=html"/>
                            </div>
                            <input type="hidden" name="ctype" value="html"/>
                            <textarea name="content" class="hidden"/>
                            <textarea name="summary" class="hidden"/>
                            <input type="hidden" name="id" class="app:edit-id"/>
                            <input type="hidden" name="author" class="app:edit-author"/>
                            <input type="hidden" name="published" class="app:edit-publication-date"/>
                            <input type="hidden" name="collection" class="app:edit-collection"/>
                            <input type="hidden" name="resource" class="app:edit-resource"/>
                            <input type="hidden" name="editor" value="html"/>
                            <input type="hidden" name="action" value=""/>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript" src="libs/scripts/jquery/jquery-1.6.2.min.js"/>
        <script type="text/javascript" src="libs/scripts/jquery/jquery-ui-1.8.custom.min.js"/>
        <script type="text/javascript" src="resources/scripts/shCore.js"/>
        <script type="text/javascript" src="resources/scripts/shBrushXQuery.js"/>
        <script type="text/javascript" src="resources/scripts/shBrushXml.js"/>
        <script type="text/javascript" src="resources/scripts/shBrushPlain.js"/>
        <script type="text/javascript">
        var Aloha = window.Aloha || ( window.Aloha = {} );
        (function (window) {
            Aloha.settings = {    
                logLevels: { 'error': true, 'warn': true, 'info': true, 'debug': false, 'deprecated': true },
                errorhandling: false,
                ribbon: false,
            	locale: 'en',
            	floatingmenu: {
        			"horizontalOffset" : "5",
        			"behaviour" : "topalign",
                    "width" : "620",
        			"topalignOffset" : "110" 
            	},
                plugins: {
                    format: {
                        // configure buttons available in the toolbar
                        config : [ 'b', 'em', 'p', 'code', 'sub', 'sup', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'pre', 'removeFormat' ],
                        // specific configuration for each editable identified by css selectors
                        editables : {
                            // the editable with id "teaser" won't offer any formatting options
                            '#teaser'   : [  ]
                        },
                        // those are the tags that will be cleaned when clicking "remove formatting"
                        removeFormats : [ 'strong', 'em', 'b', 'code', 'i', 'cite', 'q', 'code', 'abbr', 'del', 'sub', 'sup']
                    }
                },
                contentHandler: {
                    insertHtml: [ 'sanitize' ],
                    initEditable: [ 'sanitize' ],
                    sanitize: 'restricted', // relaxed, restricted, basic
                    allows: {
                        elements: [
                            'p'],
                 
                        attributes: {
                            'a'         : ['href'],
                            'blockquote': ['cite'],
                            'q'         : ['cite']
                         },
                 
                        protocols: {
                            'a'         : {'href': ['ftp', 'http', 'https', 'mailto', '__relative__']}, // Sanitize.RELATIVE
                            'blockquote': {'cite': ['http', 'https', '__relative__']},
                            'q'         : {'cite': ['http', 'https', '__relative__']}
                        }
                    }
                },
                bundles: {
                    user: '../../atomic/aloha'
                }
            };
        } )(window);
        </script>
        <script src="resources/scripts/aloha/lib/aloha.js" data-aloha-plugins="common/format,common/list,common/link,user/environment"/>
        <script src="resources/scripts/atomic/common.js" type="text/javascript" charset="utf-8"/>
        <script src="resources/scripts/atomic/edit.js" type="text/javascript" charset="utf-8"/>
    </body>
</html>